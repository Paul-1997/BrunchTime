import{_ as g,c as u,a as s,b as x,e as d,f as i,r as h,E as b,o as r,g as _,m,B as w,t as o,F as y,z as k}from"./index-BaE2heXT.js";import{u as $}from"./userStore-DmfXhCpr.js";import{p as O}from"./productStore-BasJNlZt.js";import{o as C}from"./orderStore-54WNvngN.js";import{f as L}from"./formatDate-DjwVwIQF.js";const P={name:"PanelComp",emits:["userLoginOut"],data(){return{panel:null,isPanelOpen:!1}},methods:{togglePanel(){this.panel&&(this.isPanelOpen=!this.isPanelOpen,this.panel.classList.toggle("hidden"))},handleResize(){if(!this.panel)return;const e=window.innerWidth<769;this.isPanelOpen=!e,this.panel.classList.toggle("hidden",e)}},mounted(){this.panel=this.$refs.panel,this.handleResize(),window.addEventListener("resize",this.handleResize)},beforeUnmount(){window.removeEventListener("resize",this.handleResize)},watch:{"$route.query":{handler(){window.innerWidth<768&&this.togglePanel()}}}},R={ref:"panel__wrapper",class:"panel__wrapper vh-100 d-flex z-2 top-0 position-fixed"},z={class:"panel bg-accent d-flex flex-column align-items-center overflow-hidden",ref:"panel"},S={class:"w-100 text-center fs-xl"},V={class:"nav__link mb-3"},B={class:"nav__link mb-3"},D={class:"nav__link mb-3"},N={class:"nav__link mb-3"},E={class:"nav__link"},T={class:"panel__footer mt-auto"},U={class:"d-flex gap-8 pb-6"};function A(e,t,f,v,l,c){const n=h("RouterLink");return r(),u("nav",R,[s("div",z,[t[8]||(t[8]=s("img",{src:x,alt:"logo",class:"home-logo mb-4"},null,-1)),s("ul",S,[s("li",V,[d(n,{class:"py-3 px-2 d-block",to:{name:"dashboard-home"}},{default:i(()=>t[2]||(t[2]=[_("總覽",-1)])),_:1,__:[2]})]),s("li",B,[d(n,{class:"py-3 px-2 d-block",to:{name:"dashboard-products"}},{default:i(()=>t[3]||(t[3]=[_("產品管理",-1)])),_:1,__:[3]})]),s("li",D,[d(n,{class:"py-3 px-2 d-block",to:{name:"dashboard-orders"}},{default:i(()=>t[4]||(t[4]=[_("訂單管理",-1)])),_:1,__:[4]})]),s("li",N,[d(n,{class:"py-3 px-2 d-block",to:{name:"dashboard-articles"}},{default:i(()=>t[5]||(t[5]=[_("文章管理",-1)])),_:1,__:[5]})]),s("li",E,[d(n,{class:"py-3 px-2 d-block",to:{name:"dashboard-coupons"}},{default:i(()=>t[6]||(t[6]=[_("優惠卷管理",-1)])),_:1,__:[6]})])]),s("div",T,[s("ul",U,[s("li",null,[d(n,{to:"/"},{default:i(()=>t[7]||(t[7]=[s("span",{class:"material-symbols-outlined fs-3xl cursor-pointer"},"home",-1)])),_:1,__:[7]})]),s("li",null,[s("span",{class:"material-symbols-outlined fs-3xl cursor-pointer",onClick:t[0]||(t[0]=p=>e.$emit("userLoginOut"))},"logout")])])])],512),s("button",{class:"toggle-btn d-md-none align-self-center",onClick:t[1]||(t[1]=(...p)=>c.togglePanel&&c.togglePanel(...p))},[s("span",{class:b(["material-symbols-outlined transition duration-250",{"rotate-180":l.isPanelOpen}])}," double_arrow ",2)])],512)}const F=g(P,[["render",A],["__scopeId","data-v-04dd8ffd"]]),I={components:{Panel:F},data(){return{recentOrders:[],productCount:0,orderCount:0,monthlyRevenue:0,pendingOrders:0}},methods:{...m($,["checkLogin","logout"]),...m(O,["getAllProducts"]),...m(C,["getOrders"]),formatDate:L,getStatusClass(e){return{"badge bg-success":e,"badge bg-warning":!e}}},async mounted(){await this.checkLogin()}},W={class:"d-flex"},q={class:"mainDashboardContent flex-grow-1 p-6"},M={key:1,class:"row g-4"},j={class:"col-md-6 col-lg-3"},G={class:"card h-100 border-0 shadow-sm"},H={class:"card-body"},J={class:"card-text fs-2xl"},K={class:"col-md-6 col-lg-3"},Q={class:"card h-100 border-0 shadow-sm"},X={class:"card-body"},Y={class:"card-text fs-2xl"},Z={class:"col-md-6 col-lg-3"},ss={class:"card h-100 border-0 shadow-sm"},ts={class:"card-body"},es={class:"card-text fs-2xl"},os={class:"col-md-6 col-lg-3"},ns={class:"card h-100 border-0 shadow-sm"},ls={class:"card-body"},as={class:"card-text fs-2xl"},ds={class:"col-12"},is={class:"card border-0 shadow-sm"},rs={class:"card-body"},cs={class:"table-responsive"},_s={class:"table"};function us(e,t,f,v,l,c){const n=h("Panel"),p=h("RouterView");return r(),u("div",W,[d(n,{onUserLoginOut:e.logout},null,8,["onUserLoginOut"]),s("main",q,[e.$route.name!=="dashboard-home"?(r(),w(p,{key:0})):(r(),u("div",M,[s("div",j,[s("div",G,[s("div",H,[t[0]||(t[0]=s("h5",{class:"card-title text-primary"},"總產品數",-1)),s("p",J,o(l.productCount),1)])])]),s("div",K,[s("div",Q,[s("div",X,[t[1]||(t[1]=s("h5",{class:"card-title text-success"},"總訂單數",-1)),s("p",Y,o(l.orderCount),1)])])]),s("div",Z,[s("div",ss,[s("div",ts,[t[2]||(t[2]=s("h5",{class:"card-title text-info"},"本月營業額",-1)),s("p",es,"NT$ "+o(l.monthlyRevenue),1)])])]),s("div",os,[s("div",ns,[s("div",ls,[t[3]||(t[3]=s("h5",{class:"card-title text-warning"},"待處理訂單",-1)),s("p",as,o(l.pendingOrders),1)])])]),s("div",ds,[s("div",is,[t[5]||(t[5]=s("div",{class:"card-header bg-white border-0"},[s("h5",{class:"mb-0"},"最新訂單")],-1)),s("div",rs,[s("div",cs,[s("table",_s,[t[4]||(t[4]=s("thead",null,[s("tr",null,[s("th",null,"訂單編號"),s("th",null,"客戶名稱"),s("th",null,"訂單金額"),s("th",null,"訂單狀態"),s("th",null,"建立時間")])],-1)),s("tbody",null,[(r(!0),u(y,null,k(l.recentOrders,a=>(r(),u("tr",{key:a.id},[s("td",null,o(a.id),1),s("td",null,o(a.user.name),1),s("td",null,"NT$ "+o(a.total),1),s("td",null,[s("span",{class:b(c.getStatusClass(a.is_paid))},o(a.is_paid?"已付款":"未付款"),3)]),s("td",null,o(c.formatDate(a.create_at)),1)]))),128))])])])])])])]))])])}const fs=g(I,[["render",us],["__scopeId","data-v-602824eb"]]);export{fs as default};
