import{K as u,G as r,H as n,M as d,S as c}from"./index-C3VS7dNT.js";const p={BASE_URL:"/BrunchTime/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_API_NAME:"paul7426",VITE_APP_API_URL:"https://vue3-course-api.hexschool.io"},{VITE_APP_API_NAME:o}=p,l=u("products",{state(){return{productList:[],pagination:{},onLoading:!1,fullProductList:[]}},actions:{async getProducts(s,a=0,t=""){try{let i=`v2/api/${o}/${s==="admin"?"admin/":""}products`;a>0&&(i+=`?page=${a}`),t!==""&&(i+=a>0?`&category=${t}`:`?category=${t}`),this.onLoading=!0;const{data:e}=await r(i,"get",s==="admin");this.productList=e.products,this.pagination=e.pagination}catch{n("出錯了!")}finally{this.onLoading=!1}},async getAllProducts(s){var a;try{const t=`v2/api/${o}/${s==="admin"?"admin/":""}products/all`;this.onLoading=!0;const{data:i}=await r(t,"get",s==="admin");return i}catch(t){return d.isAxiosError(t)&&n(((a=t.response)==null?void 0:a.data.message)||"錯誤!"),[]}finally{this.onLoading=!1}},async getSingleProduct(s){var a;try{const t=`v2/api/${o}/product/${s}`;this.onLoading=!0;const{data:i}=await r(t,"get");return i}catch(t){return d.isAxiosError(t)&&(await n((a=t.response)==null?void 0:a.data.message,"取得產品資訊異常",{confirmButtonText:"返回購物列表"})).isConfirmed&&this.$router.push("/products"),!1}finally{this.onLoading=!1}},async deleteProduct(s){var a;try{const t=`v2/api/${o}/admin/product/${s}`;this.onLoading=!0;const{data:i}=await r(t,"delete",!0);i.success&&(c(i.message),this.getProducts("admin"))}catch(t){d.isAxiosError(t)&&n(((a=t.response)==null?void 0:a.data.message)||"錯誤!")}finally{this.onLoading=!1}},async updateProducts(s){var a;try{const t=s.id?`v2/api/${o}/admin/product/${s.id}`:`v2/api/${o}/admin/product`,i=s.id?"put":"post";this.onLoading=!0;const{data:e}=await r(t,i,!0,{data:{...s}});e.success&&(c(e.message),this.getProducts("admin"))}catch(t){d.isAxiosError(t)&&n(((a=t.response)==null?void 0:a.data.message)||"")}finally{this.onLoading=!1}}}}),g=l;export{g as p};
