import{x as h,G as u,m as v,H as y,I as C,_ as w,c as l,a as t,g as n,e as p,f as k,r as b,E as x,t as c,D as _,F as P,z as A,o as d,d as m}from"./index-BaE2heXT.js";import{O as I}from"./OrderProgressbar-uCfHt5Pw.js";import{B as D}from"./BreadcrumbComp-B_6Zz_n1.js";const E={BASE_URL:"/BrunchTime",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_API_NAME:"paul7426",VITE_APP_API_URL:"https://vue3-course-api.hexschool.io"},B={props:["carts"],data(){return{isCouponUse:!1}},methods:{...v(u,["updateCart","deleteCart","deleteAllCart","getCarts"]),async updateQty(s,e){e<1&&(e=1),await this.updateCart({product_id:s,qty:e},!0)},async useCoupon(){const{value:s}=this.$refs.couponInput;if(s.trim()!=="")try{const{VITE_APP_API_NAME:e}=E,{data:r}=await y(`/v2/api/${e}/coupon`,"post",!1,{data:{code:s}});r.success&&this.getCarts()}catch{C("發生錯誤發生錯誤")}},getProductDetail(s){this.$router.push({name:"productDetail",params:{id:s}})}},computed:{...h(u,["f_total","total","onLoading"])},components:{OrderProgressbar:I,Breadcrumb:D}},N={class:"container"},V={key:0,class:"my-2 p-4 align-content-center text-center text-secondary fw-semibold",style:{"min-height":"60dvh","margin-block":"40px"}},T={key:1},L={class:"pt-lg"},$={class:"row flex-column-reverse flex-lg-row-reverse justify-content-center align-items-start my-10"},O={class:"col-lg-4"},S={class:"orderInfo d-flex flex-column h-100 p-3"},j={class:"flex-grow-1 mb-auto fw-bold"},U={class:"ms-2"},M={class:"mb-3 fs-xl"},Q={class:"ms-2"},R={class:"input-group justify-content-end mb-5"},F={type:"text",ref:"couponInput",id:"isCouponUse",class:"form-control rounded-0",placeholder:"請輸入優惠代碼"},z=["disabled"],q={key:0,class:"spinner-border spinner-border-sm"},G={class:"col-lg-8"},H={class:"carts p-3"},J={class:"d-flex align-items-center justify-content-between mb-4"},K={class:"fs-lg fw-bold text-secondary"},W={key:0,class:"carts__list mb-4"},X={class:"cart__Img w-fit border-end border-neutral-light"},Y=["src"],Z={class:"flex-grow-1 d-flex justify-content-md-between flex-column flex-md-row row-gap-1"},tt={class:"cart__content"},et=["onClick"],st=["onClick"],ot={class:"d-inline-flex align-items-center gap-1"},nt=["onClick"],rt=["value","onChange"],at=["onClick"],lt=["onClick"];function dt(s,e,r,it,ct,a){const f=b("Breadcrumb"),g=b("OrderProgressbar");return d(),l("div",N,[r.carts.length<1&&s.onLoading===!1?(d(),l("div",V,[e[4]||(e[4]=t("p",{class:"mb-5 fs-3xl"},[n("購物車內空空如也 "),t("br"),n("來點一些東西吃吧! "),t("br"),n("😋")],-1)),t("button",{class:"btn btn-accent text-dark py-3",onClick:e[0]||(e[0]=o=>s.$router.push("/products"))},"點我瀏覽產品")])):(d(),l("div",T,[p(f,{class:"position-absolute top-0 start-0 my-2"},{"breadcrumb-item-1":k(()=>e[5]||(e[5]=[n(" 購物車 ",-1)])),_:1}),t("div",L,[p(g,{state:1})]),t("div",$,[t("div",O,[t("div",S,[e[9]||(e[9]=t("h3",{class:"mb-3 border-bottom border-neutral fw-bold"},"訂單資訊",-1)),t("div",j,[t("p",{class:x(["mb-3",{"text-decoration-line-through  text-neutral":s.f_total<s.total}])},[e[6]||(e[6]=n(" 小計： NT$",-1)),t("span",U,c(s.total),1)],2),t("p",M,[e[7]||(e[7]=n(" 總計： NT$",-1)),t("span",Q,c(s.f_total),1)])]),t("div",R,[t("input",F,null,512),t("button",{type:"button",class:"btn px-6 btn-neutral rounded-0",onClick:e[1]||(e[1]=(...o)=>a.useCoupon&&a.useCoupon(...o))},"套用")]),t("button",{type:"button",class:"btn btn-lg btn-accent text-secondary w-100 rounded-pill",onClick:e[2]||(e[2]=o=>s.$router.push("/order")),disabled:!r.carts.length||s.onLoading},[s.onLoading?(d(),l("span",q)):_("",!0),e[8]||(e[8]=n("我要結帳 ",-1))],8,z)])]),t("div",G,[t("div",H,[e[12]||(e[12]=t("h3",{class:"mb-4 fw-bold border-bottom border-neutral"},"訂單項目",-1)),t("div",J,[t("p",null,[e[10]||(e[10]=n(" 目前購物車內共 ",-1)),t("span",K,c(r.carts.length),1),e[11]||(e[11]=n(" 件商品 ",-1))]),t("button",{type:"button",class:"btn btn-outline-danger",onClick:e[3]||(e[3]=(...o)=>s.deleteAllCart&&s.deleteAllCart(...o))},"清空購物車")]),r.carts.length?(d(),l("ul",W,[(d(!0),l(P,null,A(r.carts,o=>(d(),l("li",{key:o.id,class:"cart d-flex align-items-center mb-2 border border-neutral-light border-1 gap-2"},[t("div",X,[t("img",{src:o.product.imageUrl,alt:"",class:"w-100 h-100 object-fit-cover"},null,8,Y)]),t("div",Z,[t("div",tt,[t("p",{class:"w-fit",onClick:m(i=>a.getProductDetail(o.product.id),["prevent"])},c(o.product.title),9,et),t("p",{class:"w-fit",onClick:m(i=>a.getProductDetail(o.product.id),["prevent"])},"NT$"+c(o.final_total),9,st)]),t("div",ot,[t("button",{type:"button",class:"btn btn-sm btn-neutral-light",onClick:i=>a.updateQty(o.id,o.qty-1)}," - ",8,nt),t("input",{type:"number",min:"1",max:"999",value:o.qty,class:"form-control py-1 text-center",style:{width:"70px"},onChange:i=>a.updateQty(o.id,+i.target.value)},null,40,rt),t("button",{type:"button",class:"btn btn-sm btn-neutral-light",onClick:i=>a.updateQty(o.id,o.qty+1)}," + ",8,at)])]),t("span",{class:"material-symbols-outlined me-3 text-hover-danger transition-color duration-350 cursor-pointer",onClick:i=>s.deleteCart(o.id)}," delete ",8,lt)]))),128))])):_("",!0)])])])]))])}const _t=w(B,[["render",dt]]);export{_t as default};
