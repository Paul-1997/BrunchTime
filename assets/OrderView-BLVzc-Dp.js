import{O as E}from"./OrderProgressbar-Dy7atsaV.js";import{L as h}from"./LoadingComp-036xVdR_.js";import{f as D}from"./useHelper-DjwVwIQF.js";import{x as y,m as v,E as F,_ as O,c as _,e as o,a as e,F as g,z as M,t as a,C as S,f as n,r as i,o as p,g as b,J as B,w as L,v as N}from"./index-C3VS7dNT.js";import{o as x}from"./orderStore-pPe-bkIF.js";const q={props:["carts"],data(){return{OrderDetail:{},OrderState:2,user:{name:"",email:"",tel:"",address:""},message:""}},computed:{...y(F,["f_total"]),...y(x,["onLoading"])},methods:{formatDate:D,...v(x,["pushOrder"]),...v(F,["getCarts"]),async submitOrder(){const d=await this.pushOrder({user:this.user,message:this.message});d.success&&(await this.getCarts(),this.$refs.orderForm.resetForm(),this.$router.push(`/order/${d.orderId}`))}},components:{OrderProgressbar:E,Loading:h}},U={class:"container py-8 py-lg-lg"},k={class:"row row-gap-6"},T={class:"col-lg-7"},j={key:0},P={class:"mb-4 mb-md-0"},I={class:"cart d-flex align-items-center gap-2"},z={class:"cart__Img p-2",style:{"flex-basis":"100px"}},J=["src"],G={class:"flex-grow-1 d-flex justify-content-md-between flex-column flex-md-row row-gap-1"},H={class:"w-100"},K={class:"fs-xl"},Q={class:"me-4"},R={class:"w-fit fs-lg text-secondary"},W={class:"d-flex justify-content-between align-items-center px-md-4"},X={class:"fs-2xl fw-bold text-secondary"},Y={class:"d-flex justify-content-between align-items-center px-md-4"},Z={class:"fs-2xl fw-bold text-secondary"},$={class:"mb-3"},ee={class:"mb-3"},se={class:"mb-3"},le={class:"mb-3"},te={class:"mb-8"};function oe(d,s,m,re,r,A){const C=i("Loading"),V=i("OrderProgressbar"),c=i("VeeField"),f=i("VeeErrorMessage"),w=i("VeeForm");return p(),_(g,null,[o(C,{active:d.onLoading},null,8,["active"]),e("div",U,[o(V,{state:r.OrderState},null,8,["state"]),e("div",k,[e("div",T,[s[8]||(s[8]=e("h3",{class:"mb-4 border-bottom border-neutral fw-bold fs-2xl"},"訂購項目",-1)),m.carts.length?(p(),_("div",j,[e("ul",P,[(p(!0),_(g,null,M(m.carts,t=>(p(),_(g,{key:t.id},[e("li",I,[e("div",z,[e("img",{src:t.product.imageUrl,alt:"",class:"w-100 h-100 object-fit-cover"},null,8,J)]),e("div",G,[e("div",H,[e("p",K,[e("span",Q,a(t.product.title),1),e("span",null,a(t.qty)+a(t.product.unit),1)]),e("p",R,"NT$"+a(t.final_total),1)])])]),s[5]||(s[5]=e("hr",{class:"text-neutral"},null,-1))],64))),128))]),e("div",W,[s[6]||(s[6]=e("span",{class:"fs-xl"},"總數：",-1)),e("span",X,a(m.carts.reduce((t,l)=>t+l.qty,0))+"份",1)]),e("div",Y,[s[7]||(s[7]=e("span",{class:"fs-xl"},"總計：",-1)),e("span",Z,"$"+a(d.f_total)+" 元",1)])])):S("",!0),o(C,{active:!m.carts.length,"is-full-page":!1,class:"text-center"},null,8,["active"])]),o(w,{class:"col-lg-5",ref:"orderForm",as:"form",onSubmit:A.submitOrder},{default:n(({errors:t})=>[s[14]||(s[14]=e("h2",{class:"fw-bold border-bottom border-neutral"},"購買人資訊",-1)),e("div",$,[s[9]||(s[9]=e("label",{for:"customName",class:"col-form-label fw-bold"},[e("sup",{style:{color:"red"}},"*"),b("購買人姓名")],-1)),o(c,{modelValue:r.user.name,"onUpdate:modelValue":s[0]||(s[0]=l=>r.user.name=l),type:"text",rules:"required",name:"Buyer__name",label:"購買人姓名"},{default:n(({field:l,meta:u})=>[e("input",B(l,{id:"customName",class:["form-control",{"is-invalid":t.Buyer__name,"is-valid":u.valid&&u.touched}],placeholder:"請輸入姓名"}),null,16)]),_:2},1032,["modelValue"]),o(f,{name:"Buyer__name",class:"Vee__errMsg"})]),e("div",ee,[s[10]||(s[10]=e("label",{for:"customEmail",class:"col-form-label fw-bold"},[e("sup",{style:{color:"red"}},"*"),b("購買人信箱")],-1)),o(c,{modelValue:r.user.email,"onUpdate:modelValue":s[1]||(s[1]=l=>r.user.email=l),type:"email",rules:"email|required",name:"Buyer__email",label:"購買人姓名"},{default:n(({field:l,meta:u})=>[e("input",B(l,{id:"customEmail",class:["form-control",{"is-invalid":t.Buyer__email,"is-valid":u.valid&&u.touched}],placeholder:"請輸入信箱"}),null,16)]),_:2},1032,["modelValue"]),o(f,{name:"Buyer__email",class:"Vee__errMsg"})]),e("div",se,[s[11]||(s[11]=e("label",{for:"customTel",class:"col-form-label fw-bold"},[e("sup",{style:{color:"red"}},"*"),b("購買人電話")],-1)),o(c,{modelValue:r.user.tel,"onUpdate:modelValue":s[2]||(s[2]=l=>r.user.tel=l),type:"number",rules:"required|numeric|min:8",name:"Buyer__tel",label:"購買人電話"},{default:n(({field:l,meta:u})=>[e("input",B(l,{id:"customTel",class:["form-control",{"is-invalid":t.Buyer__tel,"is-valid":u.valid&&u.touched}],placeholder:"請輸入電話"}),null,16)]),_:2},1032,["modelValue"]),o(f,{name:"Buyer__tel",class:"Vee__errMsg"})]),e("div",le,[s[12]||(s[12]=e("label",{for:"customAddress",class:"col-form-label fw-bold"},[e("sup",{style:{color:"red"}},"*"),b("購買人地址")],-1)),o(c,{modelValue:r.user.address,"onUpdate:modelValue":s[3]||(s[3]=l=>r.user.address=l),type:"text",rules:"required",name:"Buyer__address",label:"購買人地址"},{default:n(({field:l,meta:u})=>[e("input",B(l,{id:"customAddress",class:["form-control",{"is-invalid":t.Buyer__address,"is-valid":u.valid&&u.touched}],placeholder:"請輸入地址"}),null,16)]),_:2},1032,["modelValue"]),o(f,{name:"Buyer__address",class:"Vee__errMsg"})]),e("div",te,[s[13]||(s[13]=e("label",{for:"userMessage",class:"form-label fw-bold"},"備註",-1)),L(e("textarea",{name:"",id:"userMessage",class:"form-control",placeholder:"請輸入備註項目",style:{"min-height":"100px"},"onUpdate:modelValue":s[4]||(s[4]=l=>r.message=l)},null,512),[[N,r.message]])]),s[15]||(s[15]=e("button",{type:"submit",class:"d-block btn btn-accent w-50 mx-auto"},"送出訂單",-1))]),_:1},8,["onSubmit"])])])],64)}const me=O(q,[["render",oe]]);export{me as default};
