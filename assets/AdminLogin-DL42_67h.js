import{m as g,_ as m,c as n,a as t,b as c,w as a,v as u,d as p,e as f,f as x,t as _,r as h,o as r,g as y}from"./index-C3VS7dNT.js";import{u as b}from"./userStore-DeXwtdZE.js";const v={data(){return{user:{username:"",password:""},loginFailMsg:"",isLoading:!1}},methods:{...g(b,["adminLogin"]),async doLogin(){if(this.loginFailMsg="",!!this.checkUserInput())try{this.isLoading=!0,await this.adminLogin(this.user)&&this.$router.push("/dashboard")}catch{this.loginFailMsg="帳號或密碼錯誤!"}finally{this.isLoading=!1}},clearMsg(){this.loginFailMsg=""},checkUserInput(){return this.user.username.trim()===""?(this.loginFailMsg="帳號不得為空",!1):this.user.password.trim()===""?(this.loginFailMsg="密碼不得為空",!1):this.loginFailMsg===""}}},F={class:"wrap container-field"},M={class:"d-flex flex-column justify-content-center align-items-center min-vh-100"},w={id:"loginForm",action:"post",class:"p-4 mx-auto"},L={class:"form-floating mb-3"},k={class:"form-floating mb-4"},B={class:"text-center mb-4"},C={class:"backToFront"},E={class:"mx-auto"},A={key:0,class:"text-danger fs-5 text-center"},D={key:1,class:"loader mx-auto"};function I(l,s,V,U,o,i){const d=h("RouterLink");return r(),n("div",F,[t("div",M,[s[8]||(s[8]=t("img",{class:"mx-auto",src:c,alt:"logo",style:{height:"300px"}},null,-1)),s[9]||(s[9]=t("h1",{class:"login__title mb-4 text-center text-secondary fw-bold"},"管理者登入",-1)),t("form",w,[t("div",L,[a(t("input",{type:"email",class:"login__input form-control text-secondary",id:"userEmail",placeholder:"請輸入帳號","onUpdate:modelValue":s[0]||(s[0]=e=>o.user.username=e),onInput:s[1]||(s[1]=(...e)=>i.clearMsg&&i.clearMsg(...e))},null,544),[[u,o.user.username]]),s[5]||(s[5]=t("label",{for:"userEmail",class:"text-neutral"},"Email address",-1))]),t("div",k,[a(t("input",{type:"password",class:"login__input form-control text-secondary",id:"userPassword",placeholder:"請輸入密碼","onUpdate:modelValue":s[2]||(s[2]=e=>o.user.password=e),onInput:s[3]||(s[3]=(...e)=>i.clearMsg&&i.clearMsg(...e))},null,544),[[u,o.user.password]]),s[6]||(s[6]=t("label",{for:"userPassword",class:"text-neutral"},"Password",-1))]),t("div",B,[t("button",{type:"button",class:"login__btn btn btn-primary text-secondary col-8 px-3 mb-3",onClick:s[4]||(s[4]=p((...e)=>i.doLogin&&i.doLogin(...e),["prevent"]))}," 登入 "),t("div",C,[f(d,{to:"./",class:"text-secondary"},{default:x(()=>s[7]||(s[7]=[y("返回前台")])),_:1})])]),t("div",null,[t("div",E,[!o.isLoading||o.loginFailMsg!==""?(r(),n("p",A,_(o.loginFailMsg),1)):(r(),n("div",D))])])])])])}const T=m(v,[["render",I],["__scopeId","data-v-37c653dc"]]);export{T as default};
