import{K as c,G as r,H as o,S as n,M as d}from"./index-C3VS7dNT.js";const h={BASE_URL:"/BrunchTime/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_API_NAME:"paul7426",VITE_APP_API_URL:"https://vue3-course-api.hexschool.io"},{VITE_APP_API_NAME:i}=h,l=c("orders",{state(){return{orderList:[],pagination:{},onLoading:!1}},actions:{async getOrders(e,t=0){try{let a=`v2/api/${i}/${e==="admin"?"admin/":""}orders`;t>0&&(a+=`?page=${t}`),this.onLoading=!0;const{data:s}=await r(a,"get",e==="admin");s.success&&(this.orderList=s.orders,this.pagination=s.pagination)}catch{o("出錯了!")}finally{this.onLoading=!1}},async getSingleOrder(e){try{const t=`v2/api/${i}/order/${e}`;this.onLoading=!0;const{data:a}=await r(t,"get");return a}catch{return o("發生未知錯誤"),!1}finally{this.onLoading=!1}},async deleteOrder(e){var t;try{const a=`v2/api/${i}/admin/order/${e}`;this.onLoading=!0;const{data:s}=await r(a,"delete",!0);s.success&&(n(s.message),this.getOrders("admin"))}catch(a){d.isAxiosError(a)&&o(((t=a.response)==null?void 0:t.data.message)||"錯誤!")}finally{this.onLoading=!1}},async updateOrder(e){var t;try{const a=`v2/api/${i}/admin/order/${e.id}`;this.onLoading=!0;const{data:s}=await r(a,"put",!0,{data:e});s.success&&(n(s.message),this.getOrders("admin"))}catch(a){d.isAxiosError(a)&&o(((t=a.response)==null?void 0:t.data.message)||"錯誤!")}finally{this.onLoading=!1}},async pushOrder(e){try{const t=`v2/api/${i}/order`;this.onLoading=!0;const{data:a}=await r(t,"post",!0,{data:e});return a}catch{return!1}finally{this.onLoading=!1}}}}),g=l;export{g as o};
