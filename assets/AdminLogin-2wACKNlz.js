import{m as g,A as m,_ as c,c as r,a as t,b as p,w as a,v as d,d as f,e as x,f as _,r as h,t as b,o as l,g as y}from"./index-Cvp84FeK.js";import{u as v}from"./userStore-DeCxQI4D.js";const M={data(){return{user:{username:"",password:""},loginFailMsg:"",isLoading:!1}},methods:{...g(v,["adminLogin"]),async doLogin(){var n;if(this.loginFailMsg="",!!this.checkUserInput())try{this.isLoading=!0,await this.adminLogin(this.user)&&this.$router.push("/dashboard")}catch(s){this.loginFailMsg=s instanceof m?(n=s.response)==null?void 0:n.data.message:"帳號或密碼錯誤!"}finally{this.isLoading=!1}},clearMsg(){this.loginFailMsg=""},checkUserInput(){return this.user.username.trim()===""?(this.loginFailMsg="帳號不得為空",!1):this.user.password.trim()===""?(this.loginFailMsg="密碼不得為空",!1):this.loginFailMsg===""}}},w={class:"wrap container-field"},L={class:"d-flex flex-column justify-content-center align-items-center min-vh-100"},F={id:"loginForm",action:"post",class:"p-4 mx-auto"},k={class:"form-floating mb-3"},E={class:"form-floating mb-4"},I={class:"text-center mb-4"},V={class:"backToFront"},A={class:"mx-auto"},U={key:0,class:"text-danger fs-5 text-center"},B={key:1,class:"loader mx-auto"};function C(n,s,N,P,o,i){const u=h("RouterLink");return l(),r("div",w,[t("div",L,[s[8]||(s[8]=t("img",{class:"mx-auto",src:p,alt:"logo",style:{height:"300px"}},null,-1)),s[9]||(s[9]=t("h1",{class:"login__title mb-4 text-center text-secondary fw-bold"},"管理者登入",-1)),t("form",F,[t("div",k,[a(t("input",{type:"email",class:"login__input form-control text-secondary",id:"userEmail",placeholder:"請輸入帳號","onUpdate:modelValue":s[0]||(s[0]=e=>o.user.username=e),onInput:s[1]||(s[1]=(...e)=>i.clearMsg&&i.clearMsg(...e))},null,544),[[d,o.user.username]]),s[5]||(s[5]=t("label",{for:"userEmail",class:"text-neutral"},"Email address",-1))]),t("div",E,[a(t("input",{type:"password",class:"login__input form-control text-secondary",id:"userPassword",placeholder:"請輸入密碼","onUpdate:modelValue":s[2]||(s[2]=e=>o.user.password=e),onInput:s[3]||(s[3]=(...e)=>i.clearMsg&&i.clearMsg(...e))},null,544),[[d,o.user.password]]),s[6]||(s[6]=t("label",{for:"userPassword",class:"text-neutral"},"Password",-1))]),t("div",I,[t("button",{type:"button",class:"login__btn btn btn-primary text-secondary col-8 px-3 mb-3",onClick:s[4]||(s[4]=f((...e)=>i.doLogin&&i.doLogin(...e),["prevent"]))}," 登入 "),t("div",V,[x(u,{to:"./",class:"text-secondary"},{default:_(()=>s[7]||(s[7]=[y("返回前台",-1)])),_:1,__:[7]})])]),t("div",null,[t("div",A,[!o.isLoading||o.loginFailMsg!==""?(l(),r("p",U,b(o.loginFailMsg),1)):(l(),r("div",B))])])])])])}const R=c(M,[["render",C],["__scopeId","data-v-b4e016f7"]]);export{R as default};
