import{L as l,H as n,S as c,A as r,I as o}from"./index-BaE2heXT.js";const p={VITE_APP_API_NAME:"paul7426"},{VITE_APP_API_NAME:s}=p,h=l("articles",{state(){return{articleList:[],pagination:{},onLoading:!1}},actions:{async getArticles(t){var i;try{const a=`v2/api/${s}/${t==="admin"?"admin/":""}articles`;this.onLoading=!0;const{data:e}=await n(a,"get",t==="admin");this.articleList=e.articles,this.pagination=e.pagination}catch(a){a instanceof r&&o(((i=a.response)==null?void 0:i.data.message)||"錯誤!")}finally{this.onLoading=!1}},async getSingleArticle(t){var i;try{const a=`v2/api/${s}/article/${t}`;this.onLoading=!0;const{data:e}=await n(a,"get");return e.article}catch(a){return a instanceof r&&o(((i=a.response)==null?void 0:i.data.message)||"錯誤!"),!1}finally{this.onLoading=!1}},async deleteArticle(t){var i;try{const a=`v2/api/${s}/admin/article/${t}`;this.onLoading=!0;const{data:e}=await n(a,"delete",!0);e.success&&(c("文章已刪除"),this.getArticles("admin"))}catch(a){a instanceof r&&o(((i=a.response)==null?void 0:i.data.message)||"錯誤!")}finally{this.onLoading=!1}},async updateArticle(t){var i;try{const a=t.id?`v2/api/${s}/admin/article/${t.id}`:`v2/api/${s}/admin/article`,e=t.id?"put":"post";this.onLoading=!0;const{data:d}=await n(a,e,!0,{data:{...t}});d.success&&(c(e==="put"?"文章已更新":"文章已建立"),this.getArticles("admin"))}catch(a){a instanceof r&&o(((i=a.response)==null?void 0:i.data.message)||"錯誤!")}finally{this.onLoading=!1}}}});export{h as a};
