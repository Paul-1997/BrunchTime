import{O as M}from"./OrderProgressbar-CXH3owH2.js";import{L as S}from"./LoadingComp-AEIi_1e5.js";import{m as x,G as V,x as w,_ as L,c as f,e as o,a as e,r as i,D as N,F as y,z as q,t as d,f as m,o as p,g as b,K as g,w as U,v as k}from"./index-Cvp84FeK.js";import{o as h}from"./orderStore-mTS2Tg5Z.js";import{f as C}from"./formatDate-DjwVwIQF.js";const D={props:["carts"],data(){return{OrderDetail:{},OrderState:2,user:{name:"",email:"",tel:"",address:""},message:""}},computed:{...w(V,["f_total"]),...w(h,["onLoading"])},methods:{formatDate:C,...x(h,["pushOrder"]),...x(V,["getCarts"]),async submitOrder(){const n=await this.pushOrder({user:this.user,message:this.message});n.success&&(await this.getCarts(),this.$refs.orderForm.resetForm(),this.$router.push(`/order/${n.orderId}`))}},components:{OrderProgressbar:M,Loading:S}},E={class:"container py-8 py-lg-lg"},T={class:"row row-gap-6"},j={class:"col-lg-7"},P={key:0},A={class:"mb-4 mb-md-0"},I={class:"cart d-flex align-items-center gap-2"},z={class:"cart__Img p-2",style:{"flex-basis":"100px"}},G=["src"],K={class:"flex-grow-1 d-flex justify-content-md-between flex-column flex-md-row row-gap-1"},H={class:"w-100"},J={class:"fs-xl"},Q={class:"me-4"},R={class:"w-fit fs-lg text-secondary"},W={class:"d-flex justify-content-between align-items-center px-md-4"},X={class:"fs-2xl fw-bold text-secondary"},Y={class:"d-flex justify-content-between align-items-center px-md-4"},Z={class:"fs-2xl fw-bold text-secondary"},$={class:"mb-3"},ee={class:"mb-3"},se={class:"mb-3"},le={class:"mb-3"},te={class:"mb-8"};function oe(n,s,u,re,r,B){const v=i("Loading"),O=i("OrderProgressbar"),c=i("VeeField"),_=i("VeeErrorMessage"),F=i("VeeForm");return p(),f(y,null,[o(v,{active:n.onLoading},null,8,["active"]),e("div",E,[o(O,{state:r.OrderState},null,8,["state"]),e("div",T,[e("div",j,[s[8]||(s[8]=e("h3",{class:"mb-4 border-bottom border-neutral fw-bold fs-2xl"},"訂購項目",-1)),u.carts.length?(p(),f("div",P,[e("ul",A,[(p(!0),f(y,null,q(u.carts,t=>(p(),f(y,{key:t.id},[e("li",I,[e("div",z,[e("img",{src:t.product.imageUrl,alt:"",class:"w-100 h-100 object-fit-cover"},null,8,G)]),e("div",K,[e("div",H,[e("p",J,[e("span",Q,d(t.product.title),1),e("span",null,d(t.qty)+d(t.product.unit),1)]),e("p",R,"NT$"+d(t.final_total),1)])])]),s[5]||(s[5]=e("hr",{class:"text-neutral"},null,-1))],64))),128))]),e("div",W,[s[6]||(s[6]=e("span",{class:"fs-xl"},"總數：",-1)),e("span",X,d(u.carts.reduce((t,l)=>t+l.qty,0))+"份",1)]),e("div",Y,[s[7]||(s[7]=e("span",{class:"fs-xl"},"總計：",-1)),e("span",Z,"$"+d(n.f_total)+" 元",1)])])):N("",!0),o(v,{active:!u.carts.length,"is-full-page":!1,class:"text-center"},null,8,["active"])]),o(F,{class:"col-lg-5",ref:"orderForm",as:"form",onSubmit:B.submitOrder},{default:m(({errors:t})=>[s[14]||(s[14]=e("h2",{class:"fw-bold border-bottom border-neutral"},"購買人資訊",-1)),e("div",$,[s[9]||(s[9]=e("label",{for:"customName",class:"col-form-label fw-bold"},[e("sup",{style:{color:"red"}},"*"),b("購買人姓名")],-1)),o(c,{modelValue:r.user.name,"onUpdate:modelValue":s[0]||(s[0]=l=>r.user.name=l),type:"text",rules:"required",name:"Buyer__name",label:"購買人姓名"},{default:m(({field:l,meta:a})=>[e("input",g(l,{id:"customName",class:["form-control",{"is-invalid":t.Buyer__name,"is-valid":a.valid&&a.touched}],placeholder:"請輸入姓名"}),null,16)]),_:2},1032,["modelValue"]),o(_,{name:"Buyer__name",class:"Vee__errMsg"})]),e("div",ee,[s[10]||(s[10]=e("label",{for:"customEmail",class:"col-form-label fw-bold"},[e("sup",{style:{color:"red"}},"*"),b("購買人信箱")],-1)),o(c,{modelValue:r.user.email,"onUpdate:modelValue":s[1]||(s[1]=l=>r.user.email=l),type:"email",rules:"email|required",name:"Buyer__email",label:"購買人姓名"},{default:m(({field:l,meta:a})=>[e("input",g(l,{id:"customEmail",class:["form-control",{"is-invalid":t.Buyer__email,"is-valid":a.valid&&a.touched}],placeholder:"請輸入信箱"}),null,16)]),_:2},1032,["modelValue"]),o(_,{name:"Buyer__email",class:"Vee__errMsg"})]),e("div",se,[s[11]||(s[11]=e("label",{for:"customTel",class:"col-form-label fw-bold"},[e("sup",{style:{color:"red"}},"*"),b("購買人電話")],-1)),o(c,{modelValue:r.user.tel,"onUpdate:modelValue":s[2]||(s[2]=l=>r.user.tel=l),type:"number",rules:"required|numeric|min:8",name:"Buyer__tel",label:"購買人電話"},{default:m(({field:l,meta:a})=>[e("input",g(l,{id:"customTel",class:["form-control",{"is-invalid":t.Buyer__tel,"is-valid":a.valid&&a.touched}],placeholder:"請輸入電話"}),null,16)]),_:2},1032,["modelValue"]),o(_,{name:"Buyer__tel",class:"Vee__errMsg"})]),e("div",le,[s[12]||(s[12]=e("label",{for:"customAddress",class:"col-form-label fw-bold"},[e("sup",{style:{color:"red"}},"*"),b("購買人地址")],-1)),o(c,{modelValue:r.user.address,"onUpdate:modelValue":s[3]||(s[3]=l=>r.user.address=l),type:"text",rules:"required",name:"Buyer__address",label:"購買人地址"},{default:m(({field:l,meta:a})=>[e("input",g(l,{id:"customAddress",class:["form-control",{"is-invalid":t.Buyer__address,"is-valid":a.valid&&a.touched}],placeholder:"請輸入地址"}),null,16)]),_:2},1032,["modelValue"]),o(_,{name:"Buyer__address",class:"Vee__errMsg"})]),e("div",te,[s[13]||(s[13]=e("label",{for:"userMessage",class:"form-label fw-bold"},"備註",-1)),U(e("textarea",{name:"",id:"userMessage",class:"form-control",placeholder:"請輸入備註項目",style:{"min-height":"100px"},"onUpdate:modelValue":s[4]||(s[4]=l=>r.message=l)},null,512),[[k,r.message]])]),s[15]||(s[15]=e("button",{type:"submit",class:"d-block btn btn-accent w-50 mx-auto"},"送出訂單",-1))]),_:1,__:[14,15]},8,["onSubmit"])])])],64)}const ue=L(D,[["render",oe]]);export{ue as default};
