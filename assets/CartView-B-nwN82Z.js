import{m as g,G as h,H as v,x as y,E as c,_ as A,c as l,a as t,g as n,e as p,f as E,D as w,t as i,C as b,F as k,z as x,r as _,o as u,d as m}from"./index-C3VS7dNT.js";import{O as F}from"./OrderProgressbar-Dy7atsaV.js";import{B as D}from"./BreadcrumbComp-Bim5LVZX.js";const P={BASE_URL:"/BrunchTime/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_API_NAME:"paul7426",VITE_APP_API_URL:"https://vue3-course-api.hexschool.io"},B={props:["carts"],data(){return{isCouponUse:!1}},methods:{...g(c,["updateCart","deleteCart","deleteAllCart","getCarts"]),async updateQty(s,e){e<1&&(e=1),await this.updateCart({product_id:s,qty:e},!0)},async useCoupon(){const{value:s}=this.$refs.couponInput;if(s.trim()!=="")try{const{VITE_APP_API_NAME:e}=P,{data:r}=await h(`/v2/api/${e}/coupon`,"post",!1,{data:{code:s}});r.success&&this.getCarts()}catch{v("ç™¼ç”ŸéŒ¯èª¤ç™¼ç”ŸéŒ¯èª¤")}},getProductDetail(s){this.$router.push({name:"productDetail",params:{id:s}})}},computed:{...y(c,["f_total","total","onLoading"])},components:{OrderProgressbar:F,Breadcrumb:D}},I={class:"container"},N={key:0,class:"my-2 p-4 align-content-center text-center text-secondary fw-semibold",style:{"min-height":"60dvh","margin-block":"40px"}},V={key:1},T={class:"pt-lg"},L={class:"row flex-column-reverse flex-lg-row-reverse justify-content-center align-items-start my-10"},$={class:"col-lg-4"},O={class:"orderInfo d-flex flex-column h-100 p-3"},S={class:"flex-grow-1 mb-auto fw-bold"},j={class:"ms-2"},U={class:"mb-3 fs-xl"},M={class:"ms-2"},Q={class:"input-group justify-content-end mb-5"},R={type:"text",ref:"couponInput",id:"isCouponUse",class:"form-control rounded-0",placeholder:"è«‹è¼¸å…¥å„ªæƒ ä»£ç¢¼"},z=["disabled"],q={key:0,class:"spinner-border spinner-border-sm"},G={class:"col-lg-8"},H={class:"carts p-3"},J={class:"d-flex align-items-center justify-content-between mb-4"},K={class:"fs-lg fw-bold text-secondary"},W={key:0,class:"carts__list mb-4"},X={class:"cart__Img w-fit border-end border-neutral-light"},Y=["src"],Z={class:"flex-grow-1 d-flex justify-content-md-between flex-column flex-md-row row-gap-1"},tt={class:"cart__content"},et=["onClick"],st=["onClick"],ot={class:"d-inline-flex align-items-center gap-1"},nt=["onClick"],rt=["value","onChange"],at=["onClick"],lt=["onClick"];function ut(s,e,r,dt,it,a){const f=_("Breadcrumb"),C=_("OrderProgressbar");return u(),l("div",I,[r.carts.length<1&&s.onLoading===!1?(u(),l("div",N,[e[4]||(e[4]=t("p",{class:"mb-5 fs-3xl"},[n("è³¼ç‰©è»Šå…§ç©ºç©ºå¦‚ä¹Ÿ "),t("br"),n("ä¾†é»žä¸€äº›æ±è¥¿åƒå§! "),t("br"),n("ðŸ˜‹")],-1)),t("button",{class:"btn btn-accent text-dark py-3",onClick:e[0]||(e[0]=o=>s.$router.push("/products"))},"é»žæˆ‘ç€è¦½ç”¢å“")])):(u(),l("div",V,[p(f,{class:"position-absolute top-0 start-0 my-2"},{"breadcrumb-item-1":E(()=>e[5]||(e[5]=[n(" è³¼ç‰©è»Š ")])),_:1}),t("div",T,[p(C,{state:1})]),t("div",L,[t("div",$,[t("div",O,[e[9]||(e[9]=t("h3",{class:"mb-3 border-bottom border-neutral fw-bold"},"è¨‚å–®è³‡è¨Š",-1)),t("div",S,[t("p",{class:w(["mb-3",{"text-decoration-line-through  text-neutral":s.f_total<s.total}])},[e[6]||(e[6]=n(" å°è¨ˆï¼š NT$")),t("span",j,i(s.total),1)],2),t("p",U,[e[7]||(e[7]=n(" ç¸½è¨ˆï¼š NT$")),t("span",M,i(s.f_total),1)])]),t("div",Q,[t("input",R,null,512),t("button",{type:"button",class:"btn px-6 btn-neutral rounded-0",onClick:e[1]||(e[1]=(...o)=>a.useCoupon&&a.useCoupon(...o))},"å¥—ç”¨")]),t("button",{type:"button",class:"btn btn-lg btn-accent text-secondary w-100 rounded-pill",onClick:e[2]||(e[2]=o=>s.$router.push("/order")),disabled:!r.carts.length||s.onLoading},[s.onLoading?(u(),l("span",q)):b("",!0),e[8]||(e[8]=n("æˆ‘è¦çµå¸³ "))],8,z)])]),t("div",G,[t("div",H,[e[12]||(e[12]=t("h3",{class:"mb-4 fw-bold border-bottom border-neutral"},"è¨‚å–®é …ç›®",-1)),t("div",J,[t("p",null,[e[10]||(e[10]=n(" ç›®å‰è³¼ç‰©è»Šå…§å…± ")),t("span",K,i(r.carts.length),1),e[11]||(e[11]=n(" ä»¶å•†å“ "))]),t("button",{type:"button",class:"btn btn-outline-danger",onClick:e[3]||(e[3]=(...o)=>s.deleteAllCart&&s.deleteAllCart(...o))},"æ¸…ç©ºè³¼ç‰©è»Š")]),r.carts.length?(u(),l("ul",W,[(u(!0),l(k,null,x(r.carts,o=>(u(),l("li",{key:o.id,class:"cart d-flex align-items-center mb-2 border border-neutral-light border-1 gap-2"},[t("div",X,[t("img",{src:o.product.imageUrl,alt:"",class:"w-100 h-100 object-fit-cover"},null,8,Y)]),t("div",Z,[t("div",tt,[t("p",{class:"w-fit",onClick:m(d=>a.getProductDetail(o.product.id),["prevent"])},i(o.product.title),9,et),t("p",{class:"w-fit",onClick:m(d=>a.getProductDetail(o.product.id),["prevent"])},"NT$"+i(o.final_total),9,st)]),t("div",ot,[t("button",{type:"button",class:"btn btn-sm btn-neutral-light",onClick:d=>a.updateQty(o.id,o.qty-1)}," - ",8,nt),t("input",{type:"number",min:"1",max:"999",value:o.qty,class:"form-control py-1 text-center",style:{width:"70px"},onChange:d=>a.updateQty(o.id,+d.target.value)},null,40,rt),t("button",{type:"button",class:"btn btn-sm btn-neutral-light",onClick:d=>a.updateQty(o.id,o.qty+1)}," + ",8,at)])]),t("span",{class:"material-symbols-outlined me-3 text-hover-danger transition-color duration-350 cursor-pointer",onClick:d=>s.deleteCart(o.id)}," delete ",8,lt)]))),128))])):b("",!0)])])])]))])}const _t=A(B,[["render",ut]]);export{_t as default};
